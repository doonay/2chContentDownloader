#:import FitImage kivymd.utils.fitimage
#:import Factory kivy.factory.Factory

<CustomPopup@Popup>:
	title: 'Settings'
    auto_dismiss: False
	BoxLayout:
		orientation: "horizontal"
		BoxLayout:
			orientation:"vertical"
			TextInput:
				multiline: False
				text: 'Текущая папка'
			BoxLayout:
				orientation: "horizontal"
				pos_hint: {'x': 0, 'y':0}
				CheckBox:
					size_hint: .1, 1
					pos_hint: {'x': 0, 'y':0}
					id: srt_chk1 #сортировка по расширениям
					canvas:
						Color:
							rgba: 0, 0, 1, .5
					    Rectangle:
	            			pos: self.pos
	            			size: self.size
				Label:
					text_size: self.width, self.height
        			markup: True
        			valign: 'center'
        			halign: 'left'
        			color: 0,0,0,1
					text: 'Sort by extensions'

		Button:
			size_hint: .3, 1
			text: "Ok"
			on_release:
				root.dismiss()
				#print(root.ids.chk1.state) #down, normal #записываем в конфиг настройки
		
<Screen>:
	FitImage:
		source: ''
	BoxLayout:
		orientation: 'vertical'
		padding: 10
		BoxLayout:
			size_hint: 1,.7
			orientation: 'horizontal'

			Button:
				id: stngs_btn
				size_hint: .3,1
				pos_hint: {'center_x': .5, 'center_y': .5}
				text: 'Set'
				on_release:
					#root.downloading(root.ids.thrd_lnk.text)
					#prcss_lbl.text = 'Downloading...'
					#root.info_popup()
					on_release: Factory.CustomPopup().open()

			TextInput:
				id: thrd_lnk
				size_hint: 1,1
				pos_hint: {'center_x': .5, 'center_y': .5}
				text_hint: 'test'
			Button:
				id: dwnld_btn
				size_hint: .3,1
				pos_hint: {'center_x': .5, 'center_y': .5}
				text: 'Download'
				on_press:
					root.ids.prcss_lbl.text = 'Downloading...'
				on_release:
					print(root.ids.prcss_lbl.text)
					root.downloader(root.ids.thrd_lnk.text)

		Label:
			id: prcss_lbl
			size_hint: 1,.3
			pos_hint: {'center_x': .5, 'y': 0}
			font_size: 10
			text: ''

				
